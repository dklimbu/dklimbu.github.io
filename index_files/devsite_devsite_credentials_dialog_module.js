(function(_ds){var window=this;'use strict';var GR=function(a){var b=a.vg,c=a.ic,d=a.credentials,e=a.Md,f=a.Nd,h=a.Hg,k=a.Ng,l=a.Vd,m=a.projectId,n=a.me,q=a.Ih,t=a.Jh,u=a.ue,v=a.$h,w=a.Tc;return(0,_ds.T)('<devsite-dialog class="devsite-credentials-dialog" id="'+_ds.X(a.Mg)+'"><div class="devsite-dialog-contents">'+ER(c,d,e,f,k,l,m,n,q,t,u,v,w)+'</div><div class="devsite-dialog-buttons">'+FR(b,c,h,m,w)+"</div></devsite-dialog>")},HR=function(a){return ER(a.ic,a.credentials,a.Md,a.Nd,a.Ng,a.Vd,a.projectId,a.me,a.Ih,a.Jh,a.ue,a.$h,
a.Tc)},ER=function(a,b,c,d,e,f,h,k,l,m,n,q,t){var u=_ds.T;e="<h3>"+_ds.W(e)+"</h3>";if(t){q="";if(m)q+="<div>Loading projects...</div><devsite-spinner></devsite-spinner>";else if(l)q+='Sorry. We couldn\'t load your projects. You can visit <a href="https://console.developers.google.com">Developers Console</a> to see them.';else if(0<k.length){q+='<label>Project</label><select class="devsite-credentials-dialog-selector">';l=k.length;for(m=0;m<l;m++)t=k[m],q+='<option value="'+_ds.X(t.id)+'"'+(_ds.nC(h,
t.id)?" selected":"")+">"+_ds.W(t.title)+"</option>";q+="</select>"}else q+='You have no projects. You can create one in the <a href="https://console.developers.google.com">Developers Console</a>.';a='<div class="devsite-credentials-dialog-projects">'+(0,_ds.T)(q)+'</div><div class="devsite-credentials-dialog-credentials">'+IR(a,b,c,d,f,h)+'</div><div class="devsite-credentials-dialog-oauth-message">'+JR(a,h,n)+"</div>"}else a='<p class="devsite-credentials-dialog-signin-message">',b='Sign in to <a href="'+
(_ds.X(_ds.PC(q))+'">insert your credentials.</a>'),a=(0,_ds.T)(a+b+"</p>");return u(e+a)},KR=function(a){return FR(a.vg,a.ic,a.Hg,a.projectId,a.Tc)},FR=function(a,b,c,d,e){var f="";b="https://console.developers.google.com/apis/credentials/"+_ds.LC(b)+"?project="+_ds.IC(d);b=(0,_ds.QK)(b);f+='<button class="devsite-dialog-close" type="button">Cancel</button>';e&&(_ds.nC(c,"oauth")&&(f+='<a class="button devsite-credentials-dialog-view devsite-credentials-dialog-action '+(a?"":"button-disabled")+'" type="button" href="'+
_ds.X(_ds.PC(b))+'" target="_blank">',f+="View</a>"),_ds.nC(c,"api_key")&&(f+='<button class="devsite-credentials-dialog-insert devsite-credentials-dialog-action" type="button"'+(a?"":" disabled")+">Insert</button>"));return(0,_ds.T)(f)},LR=function(a){return IR(a.ic,a.credentials,a.Md,a.Nd,a.Vd,a.projectId)},IR=function(a,b,c,d,e,f){var h="";f="https://console.developers.google.com/apis/credentials?project="+_ds.IC(f);f=(0,_ds.QK)(f);if(e)if(d)h+="<div>Loading credentials...</div><devsite-spinner></devsite-spinner>";
else if(c)h+='Sorry. We couldn\'t load the credentials for this project. You can visit the <a href="https://console.developers.google.com">Developers Console</a> to see them.';else if(0<b.length){h+='<label>Credentials</label><select class="devsite-credentials-dialog-selector">';c=b.length;for(d=0;d<c;d++)e=b[d],h+='<option value="'+_ds.X(e.credential)+'"'+(_ds.nC(a,e.credential)?" selected":"")+">"+_ds.W(e.type)+": "+_ds.W(e.credential)+"</option>";h+="</select>"}else a='This project has no appropriate credentials. You can add one in the <a href="'+
(_ds.X(_ds.PC(f))+'">Developers Console</a>.'),h+=a;return(0,_ds.T)(h)},MR=function(a){return JR(a.ic,a.projectId,a.ue)},JR=function(a,b,c){var d="";a="https://console.developers.google.com/apis/credentials/"+_ds.LC(a)+"?project="+_ds.IC(b);a=(0,_ds.QK)(a);c&&(c='<b>Note:</b> For security, this credential can only be displayed in the <a href="'+(_ds.X(_ds.PC(a))+'">Google API Console</a>. You can copy and paste it from there.'),d+=c);return(0,_ds.T)(d)},OR=function(){var a=_ds.N.call(this)||this;
a.J=new _ds.yl;a.ua=!1;a.L=!1;a.D="";a.j="";a.m=[];a.h=null;a.M="";a.N="";a.H=!1;a.C="";a.T="";a.F=[];a.R=!1;a.oa="";a.K=!1;a.Aa=new _ds.vl(function(){return NR(a)},250);return a},NR=function(a){return _ds.Va(function(b){switch(b.j){case 1:return _ds.C(b,2),_ds.x(b,DevsiteApp.whenReady(),4);case 4:_ds.D(b,3);break;case 2:return _ds.E(b),a.remove(),b.return();case 3:if(!a.isConnected)return b.return();if(!a.ua){var c=a.querySelector(".replaceable-credential");c&&(c.hasAttribute("data-devsite-credential-type")&&
a.setAttribute("type",c.getAttribute("data-devsite-credential-type")),a.className=c.className,a.classList.remove("replaceable-credential"),a.innerText=c.innerText);if(!a.hasAttribute("type"))return b.return();QR(a);a.j=a.getAttribute("type");"api_key"===a.j?(a.M="api-key-credentials-dialog",a.setAttribute("data-modal-dialog-id","api-key-credentials-dialog"),a.setAttribute("data-title","Click to insert your API key"),a.N="Insert API key"):"oauth"===a.j&&(a.M="oauth-credentials-dialog",a.setAttribute("data-modal-dialog-id",
"oauth-credentials-dialog"),a.setAttribute("data-title","Click to view your OAuth client credentials"),a.N="View OAuth client credentials");a.setAttribute("projects-loading","");a.setAttribute("credentials-loading","");a.ua=!0}if("api_key"===a.j||"oauth"===a.j){c=_ds.hD(GR,{vg:a.L,ic:a.D,credentials:a.m,Md:a.hasAttribute("credentials-error"),Nd:a.hasAttribute("credentials-loading"),Hg:a.j,Mg:a.M,Ng:a.N,Vd:a.H,projectId:a.C,me:a.F,Ih:a.hasAttribute("projects-error"),Jh:a.hasAttribute("projects-loading"),
ue:a.R,$h:a.oa,Tc:a.K});var d=document.body.querySelector("#"+a.M);d?a.h=d:(document.body.appendChild(c),a.h=c);RR(a);SR(a);TR(a)}UR(a);_ds.y(b)}})},UR=function(a){a.J.listen(document.body,"devsite-dialog-show",function(){VR(a,"Credentials Dialog Shown")});a.J.listen(a,"click",function(){WR(a)})},RR=function(a){var b=a.h.querySelector(".devsite-credentials-dialog-projects .devsite-credentials-dialog-selector");b instanceof HTMLSelectElement&&a.J.listen(b,"change",function(){YR(a)})},SR=function(a){var b=
a.h.querySelector(".devsite-credentials-dialog-credentials .devsite-credentials-dialog-selector");b instanceof HTMLSelectElement&&a.J.listen(b,"change",function(){if(a.h){var c=a.h.querySelector(".devsite-credentials-dialog-credentials .devsite-credentials-dialog-selector");c instanceof HTMLSelectElement&&(a.D=a.m[c.selectedIndex].credential,ZR(a),$R(a),aS(a))}})},TR=function(a){var b=a.h.querySelector(".devsite-credentials-dialog-insert");b&&a.J.listen(b,"click",function(){a.innerText=a.D;a.h.open=
!1;VR(a,"Credentials Dialog Successful Insert")});(b=a.h.querySelector(".devsite-credentials-dialog-view"))&&a.J.listen(b,"click",function(){VR(a,"Credentials Dialog Successful View")})},WR=function(a){_ds.Va(function(b){if(1==b.j)return QR(a),_ds.x(b,bS(a),2);if(3!=b.j)return _ds.x(b,cS(a),3);a.h&&(_ds.eD(a.h.querySelector(".devsite-dialog-contents"),HR,{ic:a.D,credentials:a.m,Md:a.hasAttribute("credentials-error"),Nd:a.hasAttribute("credentials-loading"),Ng:a.N,Vd:a.H,projectId:a.C,me:a.F,Ih:a.hasAttribute("projects-error"),
Jh:a.hasAttribute("projects-loading"),ue:a.R,$h:a.oa,Tc:a.K}),RR(a),SR(a));aS(a);_ds.y(b)})},QR=function(a){var b=document.querySelector("devsite-user");b&&(a.K=b.hasAttribute("signed-in"));b&&b.hasAttribute("sign-in-url")&&(a.oa=b.getAttribute("sign-in-url"))},bS=function(a){var b,c,d;return _ds.Va(function(e){switch(e.j){case 1:if(!a.K)return e.return();a.setAttribute("projects-loading","");a.removeAttribute("projects-error");a.H=!1;_ds.C(e,2,3);return _ds.x(e,_ds.ek("/profile/projects",null,"GET",
!0),5);case 5:b=e.h,c=_ds.Qg(_ds.kH,b),d=dS(c),a.F=d,0<a.F.length&&(a.C=a.F[0].id,a.T=a.F[0].rf,a.H=!0);case 3:_ds.Ea(e);a.removeAttribute("projects-loading");_ds.Ga(e,0);break;case 2:_ds.E(e),a.setAttribute("projects-error",""),a.F=[],VR(a,"Credentials Dialog Projects Error"),e.G(3)}})},dS=function(a){return _ds.Kg(a,_ds.gH,1).sort(function(b,c){return _ds.J(b,2).localeCompare(_ds.J(c,2))}).map(function(b){return{id:_ds.J(b,2),rf:_ds.vg(b,3).toString(),title:b.getTitle()}})},cS=function(a){var b,
c,d;return _ds.Va(function(e){switch(e.j){case 1:if(!a.K||!a.T||!a.C)return e.return();a.setAttribute("credentials-loading","");a.removeAttribute("credentials-error");_ds.C(e,2,3);b="";if("api_key"!=a.j){e.G(5);break}return _ds.x(e,_ds.ek("/profile/api_keys",JSON.stringify({project_id:a.C})),6);case 6:b=e.h;case 5:if("oauth"!=a.j){e.G(7);break}return _ds.x(e,_ds.ek("/profile/oauth_clients",JSON.stringify({project_number:a.T})),8);case 8:b=e.h;case 7:c=eS(b),a.m=c;case 3:_ds.Ea(e);a.removeAttribute("credentials-loading");
_ds.Ga(e,4);break;case 2:_ds.E(e);a.setAttribute("credentials-error","");a.m=[];VR(a,"Credentials Dialog Credentials Error");e.G(3);break;case 4:0<a.m.length&&(a.D=a.m[0].credential),d=!a.hasAttribute("credentials-loading")&&!a.hasAttribute("credentials-error")&&0<a.m.length,a.L=a.H&&d,a.R="oauth"==a.j&&a.L,_ds.y(e)}})},eS=function(a){a=JSON.parse(a);return Object.entries(a).sort(function(b,c){return b[0].localeCompare(c[0])}).map(function(b){return{credential:b[0],type:b[1].type}})},YR=function(a){var b,
c;_ds.Va(function(d){if(1==d.j){if(!a.h)return d.return();b=a.h.querySelector(".devsite-credentials-dialog-projects .devsite-credentials-dialog-selector");if(!(b instanceof HTMLSelectElement))return d.G(0);c=a.F[b.selectedIndex];if(!c)return d.G(0);a.C=c.id;a.T=c.rf;return _ds.x(d,cS(a),4)}ZR(a);$R(a);aS(a);_ds.y(d)})},ZR=function(a){a.h&&(_ds.eD(a.h.querySelector(".devsite-credentials-dialog-credentials"),LR,{ic:a.D,credentials:a.m,Md:a.hasAttribute("credentials-error"),Nd:a.hasAttribute("credentials-loading"),
projectId:a.C,Vd:a.H}),SR(a))},aS=function(a){a.h&&(_ds.eD(a.h.querySelector(".devsite-dialog-buttons"),KR,{vg:a.L,Hg:a.j,projectId:a.C,Tc:a.K,ic:a.D}),TR(a))},$R=function(a){a.h&&_ds.eD(a.h.querySelector(".devsite-credentials-dialog-oauth-message"),MR,{ue:a.R,ic:a.D,projectId:a.C})},VR=function(a,b){a.dispatchEvent(new CustomEvent("devsite-analytics-observation",{detail:{category:"Credentials Dialog",action:b},bubbles:!0}))};_ds.r(OR,_ds.N);OR.prototype.connectedCallback=function(){this.Aa.xa()};OR.prototype.disconnectedCallback=function(){_ds.El(this.J);var a=!document.querySelector('devsite-credentials-dialog[type="'+this.j+'"]');this.hasAttribute("data-modal-dialog-id")&&a&&(a=document.body.querySelector("#"+this.getAttribute("data-modal-dialog-id")))&&document.body.removeChild(a)};OR.prototype.disconnectedCallback=OR.prototype.disconnectedCallback;OR.prototype.connectedCallback=OR.prototype.connectedCallback;try{window.customElements.define("devsite-credentials-dialog",OR)}catch(a){console.warn("devsite.app.customElement.DevsiteCredentialsDialog",a)};})(_ds_www);
