(function(_ds){var window=this;'use strict';var f6=function(){var a=_ds.N.apply(this,arguments)||this;a.j=new _ds.Fl;a.h=!1;return a},i6=function(a){_ds.M(a,function c(){var d,e=this,f,h,k,l,m;return _ds.F(c,function(n){switch(n.j){case 1:return _ds.x(n,(0,_ds.Cn)(),2);case 2:d=n.h;var q,t=Number(null!==(q=e.getAttribute("threshold"))&&void 0!==q?q:void 0);f=isNaN(t)?.8:t;h=e.hasAttribute("unfiltered");e.j.resolve();_ds.C(n,3);return _ds.x(n,d.intersectionEnterForElement(e,f),5);case 5:_ds.D(n,4);break;case 3:_ds.E(n),e.h=!0;case 4:l=
null;if(h)k="devsite-analytics-observation-unfiltered",l=g6(e);else{k="devsite-analytics-observation";var u,v,w;q=null!==(u=h6(e,"event-category"))&&void 0!==u?u:"Site-Wide Custom Events";u=null!==(v=h6(e,"event-action"))&&void 0!==v?v:"viewed";null!==(w=h6(e,"event-label"))&&void 0!==w?v=w:0<e.children.length?(w=e.children[0],v=w.className,w=w.tagName,v="Element: "+(v?v:w)):v="Element: (text node)";w=h6(e,"event-value");var B=void 0;null!==w&&void 0!==w&&(B=null!==(t=Number(w))&&void 0!==t?t:void 0);
l={category:q,action:u,label:v,value:B}}null!==l&&(m={detail:l,bubbles:!0},e.dispatchEvent(new CustomEvent(k,m)));_ds.y(n)}})})},h6=function(a,b){var c,d=a.getAttribute(b);a.h&&(d=null!==(c=a.getAttribute("fallback-"+b))&&void 0!==c?c:d);return d},g6=function(a){function b(k,l){l=_ds.Xd(k.name.slice(l.length));c[l]=k.value}var c={},d=[],e=[];if(a.hasAttributes())for(var f=0;f<a.attributes.length;++f){var h=a.attributes[f];h.specified&&(h.name.startsWith("event-data-")?d.push(h):h.name.startsWith("fallback-event-data-")&&
e.push(h))}d=_ds.p(d);for(f=d.next();!f.done;f=d.next())b(f.value,"event-data-");if(a.h)for(a=_ds.p(e),e=a.next();!e.done;e=a.next())b(e.value,"fallback-event-data-");return 0===Object.keys(c).length?(console.error('DevsiteVisibilityAnalytics element configured incorrectly for unfiltered events; specify "event-data-" attributes.'),null):{eventData:JSON.stringify(c)}};_ds.r(f6,_ds.N);f6.prototype.connectedCallback=function(){i6(this)};f6.prototype.whenReady=function(){return this.j.promise};try{window.customElements.define("devsite-visibility-analytics",f6)}catch(a){console.warn("devsite.app.customElement.DevsiteVisibilityAnalytics",a)};})(_ds_www);
